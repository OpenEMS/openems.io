<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Getting Started :: Open Energy Management System</title>
    <link rel="canonical" href="https://openems.github.io/openems.io/openems/latest/gettingstarted.html">
    <meta name="keywords" content="AsciiDoc">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/feneco.ico" type="image/x-icon">
<link rel="stylesheet" href="../../_/css/vendor/docsearch.min.css">  </head>
  <body class="article">
<header class="header">
  <nav class="navbar" color="#2d8fab">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://github.com/OpenEMS/openems">OpenEMS // Docs</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/OpenEMS/openems">
          <span class="gitlink">
          </span>
        </a>
      </div>
    </div>
  </nav>
</header><div class="main-wrapper">
<div class="navigation-container" data-component="openems" data-version="latest">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="introduction.html">Open Energy Management System</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction.html">Introduction</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="gettingstarted.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="coreconcepts.html">Core concepts &amp; terminology</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">OpenEMS Edge</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/nature.html">Nature</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/scheduler.html">Scheduler</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/controller.html">Controller</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/bridge.html">Bridge</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/device_service.html">Device &amp; Service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/timedata.html">Timedata</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/implement.html">Implementing a Device</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/build.html">Build OpenEMS Edge</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/deploy.html">Deploy OpenEMS Edge</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">OpenEMS UI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ui/setup-ide.html">Setup IDE</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ui/architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ui/build.html">Build OpenEMS UI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ui/implementing-a-widget.html">Implementing a UI Widget</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">OpenEMS Backend</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backend/architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backend/backend-to-backend.html">Backend-to-Backend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backend/metadata.html">Metadata</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backend/timedata.html">Timedata</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backend/service.html">Service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backend/build.html">Build OpenEMS Backend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backend/deploy.html">Deploy OpenEMS Backend</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="component-communication/index.html">Component Communication</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Simulation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="simulation/gitpod.html">Live-Demo on Gitpod</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="simulation/realtime.html">Real-Time Simulation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="simulation/ui-history.html">UI History Simulation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Contribute</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="contribute/coding-guidelines.html">Coding Guidelines</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="contribute/documentation.html">Documentation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://openems.github.io/openems.io/javadoc/">Javadoc</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Open Energy Management System</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Open Energy Management System</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="introduction.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="introduction.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="introduction.html">Open Energy Management System</a></li>
    <li class="crumb"><a href="gettingstarted.html">Getting Started</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/OpenEMS/openems/tree/develop/doc/modules/ROOT/pages/gettingstarted.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>Getting Started</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_download_the_source_code">1. Download the source code</a></li>
<li><a href="#_setup_eclipse_ide_for_openems_edge_and_backend">2. Setup Eclipse IDE for OpenEMS Edge and Backend</a></li>
<li><a href="#_run_openems_edge_and_start_simulator">3. Run OpenEMS Edge and start Simulator</a></li>
<li><a href="#_run_openems_ui">4. Run OpenEMS UI</a></li>
<li><a href="#_integrate_openems_backend">5. Integrate OpenEMS Backend</a>
<ul class="sectlevel2">
<li><a href="#_run_and_configure_openems_backend">5.1. Run and configure OpenEMS Backend</a></li>
<li><a href="#_configure_openems_edge">5.2. Configure OpenEMS Edge</a></li>
<li><a href="#_connect_openems_ui_with_backend">5.3. Connect OpenEMS UI with Backend</a></li>
</ul>
</li>
<li><a href="#_next_steps">6. Next steps</a></li>
<li><a href="#_help">7. Help</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This quick 'Getting Started' guide should help you setup a complete development environment. Once finished you will have a working instance of OpenEMS Edge, with simulated energy storage and photovoltaic system, as well as an OpenEMS UI for monitoring the simulator inside your web browser. Finally OpenEMS Backend is added to simulate a cloud backend that connects UI and Edge.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_download_the_source_code"><a class="anchor" href="#_download_the_source_code"></a>1. Download the source code</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download any <a href="https://git-scm.com">git client <span class="icon"><i class="fa fa-external-link"></i></span></a> and install it. Our recommendation is <a href="https://www.sourcetreeapp.com/">Sourcetree by Atlassian <span class="icon"><i class="fa fa-external-link"></i></span></a></p>
</li>
<li>
<p>Clone the OpenEMS git repository</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In Sourcetree:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>press <b class="button">File</b> &#8594; <b class="button">Clone</b></p>
</li>
<li>
<p>enter the git repository path <code><a href="https://github.com/OpenEMS/openems.git" class="bare">https://github.com/OpenEMS/openems.git</a></code></p>
</li>
<li>
<p>select a target directory, for example <code>C:\Users\your.user\git\openems</code></p>
</li>
<li>
<p>and press <b class="button">Clone</b>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/sourcetree.png" alt="Cloning the git repository using Sourcetree">
</div>
<div class="title">Figure 1. Cloning the git repository using Sourcetree</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Alternatively: with the git command line utility</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>open a console</p>
</li>
<li>
<p>change to the target directory</p>
</li>
<li>
<p>execute <code>git clone <a href="https://github.com/OpenEMS/openems.git" class="bare">https://github.com/OpenEMS/openems.git</a></code></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Git is downloading the complete source code for you.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
OpenEMS uses the <strong>git</strong> version control system via the popular GitHub platform. It&#8217;s worth learning some basic git commands and workflows. If you want to start with your own OpenEMS developments, just create a copy using the GitHub <a href="https://docs.github.com/en/get-started/quickstart/fork-a-repo">fork a repo</a> feature, and <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request-from-a-fork">create a pull request</a> to get feedback on your work and contribute to the project.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setup_eclipse_ide_for_openems_edge_and_backend"><a class="anchor" href="#_setup_eclipse_ide_for_openems_edge_and_backend"></a>2. Setup Eclipse IDE for OpenEMS Edge and Backend</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Eclipse IDE is the recommended development environment for newcomers to OpenEMS. If you are more familiar with IntelliJ IDEA, feel free to use it. Follow <a href="intellij.html" class="xref page">this guide</a>.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Prepare Eclipse IDE</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Download Java Development Kit (JDK) 17 and install it. We recommend the <a href="https://adoptium.net/de/temurin/releases/?version=17">OpenJDK Temurin builds by the Adoptium project</a></p>
</li>
<li>
<p>Download <a href="https://www.eclipse.org/downloads/">Eclipse for Java <span class="icon"><i class="fa fa-external-link"></i></span></a>, install and start it</p>
</li>
<li>
<p>On first start you will get asked to create a workspace.
Select your source code directory (<code>C:\Users\your.user\git\openems</code> in our example) and press <b class="button">Launch</b>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/eclipse-workspace.png" alt="Creating a workspace in Eclipse IDE">
</div>
<div class="title">Figure 2. Creating a workspace in Eclipse IDE</div>
</div>
</li>
<li>
<p>Install <a href="http://bndtools.org">BndTools <span class="icon"><i class="fa fa-external-link"></i></span></a> in Eclipse:</p>
<div class="paragraph">
<p>Menu: <b class="button">Help</b> → <b class="button">Eclipse Marketplace&#8230;&#8203;</b> → <b class="button">Find:</b> → enter <b class="button">Bndtools</b> → press <b class="button">Install</b></p>
</div>
</li>
<li>
<p>Configure Eclipse IDE to use JDK 17.</p>
<div class="ulist">
<ul>
<li>
<p>In the Menu select <b class="button">Windows</b> → <b class="button">Preferences</b></p>
</li>
<li>
<p>Select <b class="button">Java</b> - <b class="button">Installed JREs</b> in the navigation tree</p>
</li>
<li>
<p>Press the <b class="button">Add&#8230;&#8203;</b> button</p>
</li>
<li>
<p>Keep <b class="button">Standard VM</b> selected and press <b class="button">Next &gt;</b></p>
</li>
<li>
<p>Press the <b class="button">Directory&#8230;&#8203;</b> button and select the folder of the installed JDK (e.g. <code>C:\Program Files\Eclipse Adoptium\jdk-17.0.7.7-hotspot</code>)</p>
</li>
<li>
<p>Press the <b class="button">Finish</b> button</p>
</li>
<li>
<p>Back in the Preferences window, tick the newly added JDK 17 and press <b class="button">Apply and Close</b></p>
<div class="imageblock">
<div class="content">
<img src="_images/eclipse-select-jdk.png" alt="Set the Java Development Kit in Eclipse IDE">
</div>
<div class="title">Figure 3. Creating a workspace in Eclipse IDE</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Import OpenEMS component projects (OSGi bundles):</p>
<div class="paragraph">
<p>Menu: <b class="button">File</b> →  <b class="button">Import&#8230;&#8203;</b> → <b class="button">Bndtools</b> → <b class="button">Existing Bnd Workspace</b> → your source code directory should have been selected as <strong>Root Directory</strong> automatically → <b class="button">Finish</b> → "Switch to Bndtools perspective?" <b class="button">Yes</b></p>
</div>
</li>
<li>
<p>Eclipse will now spend some time importing and building OpenEMS Edge and Backend. Close the <strong>Welcome</strong> window to follow the progress till you eventually see the full tree of OpenEMS projects (or bundles) in the <strong>Bndtools Explorer</strong> and all errors and warnings in the <strong>Problems</strong> tab disappear.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_run_openems_edge_and_start_simulator"><a class="anchor" href="#_run_openems_edge_and_start_simulator"></a>3. Run OpenEMS Edge and start Simulator</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run OpenEMS Edge</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In Eclipse IDE open the project <b class="button">io.openems.edge.application</b> and double click on <b class="button">EdgeApp.bndrun</b>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/eclipse-io.openems.edge.application.png" alt="io.openems.edge.application project in Eclipse IDE">
</div>
<div class="title">Figure 4. io.openems.edge.application project in Eclipse IDE</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Instead of navigating through the projects tree, you can simply use the keyboard shortcut <b class="button">Ctrl</b> + <b class="button">Shift</b> + <b class="button">R</b> to start the "Open Resource" dialog. Enter "EdgeApp.bndrun" there and press <b class="button">Enter</b> to open the file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>EdgeApp.bndrun</code> file declares all the bundles and runtime properties. For now it should not be necessary to edit it, but it hides some useful settings unter the <b class="button">Source</b> tab:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.osgi.service.http.port=8080</code>: start the Apache Felix Web Console on port <code>8080</code></p>
</li>
<li>
<p><code>felix.cm.dir=c:/openems/config</code>: persist configurations in the folder <code>c:/openems/config</code>. Adjust this if you are working on Linux to keep your configurations after restart</p>
</li>
<li>
<p><code>openems.data.dir=c:/openems/data</code>: this is where bundles are allowed to persist data. It is used e.g. by the RRD4j timedata storage</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click on <b class="button">Run OSGi</b> to run OpenEMS Edge. You should see log outputs in the <strong>Console</strong> tab inside Eclipse IDE.</p>
<div class="imageblock">
<div class="content">
<img src="_images/eclipse-edge-initial-log-output.png" alt="OpenEMS Edge initial log output">
</div>
<div class="title">Figure 5. OpenEMS Edge initial log output</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Configure and start the Simulator</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open the <a href="http://localhost:8080/system/console/configMgr">Apache Felix Web Console Configuration <span class="icon"><i class="fa fa-external-link"></i></span></a></p>
<div class="paragraph">
<p>Login with username <strong>admin</strong> and password <strong>admin</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/apache-felix-console-configuration.png" alt="Apache Felix Web Console Configuration">
</div>
<div class="title">Figure 6. Apache Felix Web Console Configuration</div>
</div>
</li>
<li>
<p>Configure a Scheduler</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Scheduler is responsible for executing the control algorithms (Controllers) in order and defines the OpenEMS Edge application cycle
</td>
</tr>
</table>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click on <em><strong>Scheduler All Alphabetically</strong></em></p>
<div class="imageblock">
<div class="content">
<img src="_images/config-scheduler-all-alphabetically.png" alt="Configuration of All Alphabetically Scheduler">
</div>
<div class="title">Figure 7. Configuration of All Alphabetically Scheduler</div>
</div>
</li>
<li>
<p>Accept the default values and click <b class="button">Save</b></p>
</li>
<li>
<p>You created your first instance of an OpenEMS Component with ID "scheduler0". The log shows:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">INFO  [onent.AbstractOpenemsComponent] [scheduler0] Activate Scheduler.AllAlphabetically</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add any other OpenEMS Components in the same way.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Once everything is setup you can configure Components more easily via OpenEMS UI using the "Install components" feature in the Settings.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Configure debug outputs on the console: <em><strong>Controller Debug Log</strong></em>. The default values can be accepted without changes.</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-controller-debug-log.png" alt="Configuration of Controller Debug Log">
</div>
<div class="title">Figure 8. Configuration of Controller Debug Log</div>
</div>
<div class="paragraph">
<p>The log shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">INFO  [onent.AbstractOpenemsComponent] [ctrlDebugLog0] Activate Controller.Debug.Log</code></pre>
</div>
</div>
<div class="paragraph">
<p>followed once per second by</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">INFO  [ntroller.debuglog.DebugLogImpl] [ctrlDebugLog0] _sum[State:Ok]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is 'once per second', because the Cycle-Time is defined as "1000 ms" by default. Adjust the setting in the <em><strong>Core Cycle (Core.Cycle)</strong></em> component to change this.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure a simulated standard-load-profile datasource using <em><strong>Simulator DataSource: CSV Predefined</strong></em>. Select <code>H0_HOUSEHOLD_SUMMER_WEEKDAY_STANDARD_LOAD_PROFILE</code> as the <code>Source</code>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-simulator-datasource-standard-load-profile.png" alt="Configuration of Simulator DataSource: CSV Predefined as standard load profile datasource">
</div>
<div class="title">Figure 9. Configuration of Simulator DataSource: CSV Predefined as standard load profile datasource</div>
</div>
<div class="paragraph">
<p>The log shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">INFO  [onent.AbstractOpenemsComponent] [datasource0] Activate Simulator.Datasource.CSV.Predefined</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The data source was configured with the OpenEMS Component ID <code>datasource0</code> which will be used in the next step as the <code>Datasource-ID</code> reference.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure a simulated grid meter: <em><strong>Simulator GridMeter Acting</strong></em>. Configure the <code>Datasource-ID 'datasource0'</code> to refer to the data source configured above.</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-simulator-grid-meter-acting.png" alt="Configuration of Simulator GridMeter Acting">
</div>
<div class="title">Figure 10. Configuration of Simulator GridMeter Acting</div>
</div>
<div class="paragraph">
<p>This time some more logs will appear. Most importantly they show, that the Grid meter now measures (simulates) a power value and the Consumption is derived directly from this value, because no PV system or energy storage system is configured yet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">INFO  [onent.AbstractOpenemsComponent] [meter0] Activate Simulator.GridMeter.Acting
INFO  [onent.AbstractOpenemsComponent] [meter0] Deactivate Simulator.GridMeter.Acting
INFO  [onent.AbstractOpenemsComponent] [meter0] Activate Simulator.GridMeter.Acting
INFO  [ntroller.debuglog.DebugLogImpl] [ctrlDebugLog0] _sum[State:Ok Grid:1336 W Consumption:1336 W] meter0[1336 W]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This setup causes the simulated grid-meter to take the standardized load-profiles data as input parameter.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
'Acting' in the name 'Simulator GridMeter Acting' refers to the fact, that this meter actively provides data - in opposite to a 'Reacting' simulated device that is reacting on other components: for example the 'Simulator.EssSymmetric.Reacting' configured below.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure a simulated reacting energy storage system: <em><strong>Simulator EssSymmetric Reacting</strong></em>. The default values can be accepted without changes.</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-simulator-esssymmetric-reacting.png" alt="Configuration of Simulator EssSymmetric Reacting">
</div>
<div class="title">Figure 11. Configuration of Simulator EssSymmetric Reacting</div>
</div>
<div class="paragraph">
<p>The log shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">INFO  [onent.AbstractOpenemsComponent] [ess0] Activate Simulator.EssSymmetric.Reacting
INFO  [ntroller.debuglog.DebugLogImpl] [ctrlDebugLog0] _sum[State:Ok Ess SoC:50 % Grid:1560 W Consumption:1560 W] ess0[SoC:50 %|L:UNDEFINED] meter0[1560 W]
INFO  [ntroller.debuglog.DebugLogImpl] [ctrlDebugLog0] _sum[State:Ok Ess SoC:50 %|L:0 W Grid:1502 W Consumption:1502 W] ess0[SoC:50 %|L:0 W] meter0[1502 W]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The debug log now shows data for the battery, but the charge/discharge power stays at "0 W" and the state of charge stays at "50 %" as configured. Next step is to configure a control algorithm that tells the battery to charge or discharge depending on the power measured by the simulated grid meter.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure the self-consumption optimization algorithm: <em><strong>Controller Ess Balancing</strong></em>. Configure the <code>Ess-ID</code> <code>'ess0'</code> and <code>Grid-Meter-ID</code> <code>'meter0'</code> to refer to the components configured above.</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-controller-ess-balancing.png" alt="Configuration of Controller Ess Balancing">
</div>
<div class="title">Figure 12. Configuration of Controller Ess Balancing</div>
</div>
<div class="paragraph">
<p>The log shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">INFO  [onent.AbstractOpenemsComponent] [ctrlBalancing0] Activate Controller.Symmetric.Balancing
...
INFO  [ntroller.debuglog.DebugLogImpl] [ctrlDebugLog0] _sum[State:Ok Ess SoC:50 %|L:593 W Grid:15 W Consumption:608 W] ess0[SoC:49 %|L:593 W|DebugSetActivePower:593 W] meter0[15 W]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Values will differ slightly for you, but note how the Controller now tells the battery to discharge (<code>Ess SoC:49 %|L:593 W</code>), trying to balance the Grid power to "0 W" (<code>Grid L:15 W</code>):
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure the websocket Api Controller: <em><strong>Controller Api Websocket</strong></em>. The default values can be accepted without changes.</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-controller-api-websocket.png" alt="Configuration of Controller Api Websocket">
</div>
<div class="title">Figure 13. Configuration of Controller Api Websocket</div>
</div>
<div class="paragraph">
<p>The log shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">INFO  [onent.AbstractOpenemsComponent] [ctrlApiWebsocket0] Activate Controller.Api.Websocket
INFO  [socket.AbstractWebsocketServer] Starting [Websocket Api] websocket server [port=8085]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Controller Api Websocket is required so that OpenEMS UI can connect to OpenEMS Edge locally.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_run_openems_ui"><a class="anchor" href="#_run_openems_ui"></a>4. Run OpenEMS UI</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you plan to actively develop on OpenEMS UI, you can now also setup a development environment for it using <a href="ui/setup-ide.html" class="xref page">this guide</a>. Otherwise just go ahead with the hosted version:
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure OpenEMS Edge is running locally and the websocket is running on port <code>8085</code>.</p>
</li>
<li>
<p>Open <a href="https://openemsuilocal.consolinno.de">https://openemsuilocal.consolinno.de <span class="icon"><i class="fa fa-external-link"></i></span></a></p>
</li>
<li>
<p>You should see OpenEMS UI. Log in as user "guest" by leaving the standard password and clicking the login button. Alternatively type "admin" in the password field to log in with extended permissions.</p>
<div class="imageblock">
<div class="content">
<img src="_images/openems-ui-login.png" alt="OpenEMS UI Login screen">
</div>
<div class="title">Figure 14. OpenEMS UI Login screen</div>
</div>
</li>
<li>
<p>You should see the Energymonitor showing the same data as the DebugLog output on the console.</p>
<div class="imageblock">
<div class="content">
<img src="_images/openems-ui-edge-overview.png" alt="OpenEMS UI Energymonitor screen">
</div>
<div class="title">Figure 15. OpenEMS UI Energymonitor screen</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><em>Unfortunately the hosted version of OpenEMS UI is currently slightly outdated and incompatble with latest OpenEMS Edge. Follow the <a href="ui/setup-ide.html" class="xref page">OpenEMS UI guide</a> to produce the following visualization. The language can be changed in the "burger menu" on top left &#8594; <b class="button">admin</b> &#8594; <b class="button">Allgemeine Einstellungen</b>.</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/openems-ui-edge-overview2.png" alt="OpenEMS UI Energymonitor screen">
</div>
<div class="title">Figure 16. OpenEMS UI Energymonitor screen</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_integrate_openems_backend"><a class="anchor" href="#_integrate_openems_backend"></a>5. Integrate OpenEMS Backend</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instead of having Edge and UI talk to each other directly, the communication can also be proxied via Backend.</p>
</div>
<div class="sect2">
<h3 id="_run_and_configure_openems_backend"><a class="anchor" href="#_run_and_configure_openems_backend"></a>5.1. Run and configure OpenEMS Backend</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Eclipse IDE open the project <b class="button">io.openems.backend.application</b> and double click on <b class="button">BackendApp.bndrun</b>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/eclipse-io.openems.backend.application.png" alt="io.openems.backend.application project in Eclipse IDE">
</div>
<div class="title">Figure 17. io.openems.backend.application project in Eclipse IDE</div>
</div>
</li>
<li>
<p>Click on <b class="button">Run OSGi</b> to run OpenEMS Backend. You should see log outputs on the console inside Eclipse IDE.</p>
<div class="imageblock">
<div class="content">
<img src="_images/eclipse-backend-initial-log-output.png" alt="OpenEMS Backend initial log output">
</div>
<div class="title">Figure 18. OpenEMS Backend initial log output</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Disable the two icon buttons "Show Console When Standard Out changes" and "Show Console When Standard Error changes" next to the <em>Console</em> tab to avoid constant switching between the output of OpenEMS Edge and OpenEMS Backend.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure the Backend</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open the <a href="http://localhost:8079/system/console/configMgr">Apache Felix Web Console Configuration <span class="icon"><i class="fa fa-external-link"></i></span></a>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Apache Felix Web Console for OpenEMS Backend is started on port 8079 by default. This is configured using the <code>org.osgi.service.http.port</code> setting in BackendApp.bndrun.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Login with username <strong>admin</strong> and password <strong>admin</strong>.</p>
</div>
</li>
<li>
<p>Configure Edge.Websocket</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <em><strong>Edge.Websocket</strong></em> service is responsible for the communication between OpenEMS Backend and OpenEMS Edge.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the example we are configuring the <code>Port '8081'</code>. This port needs to match with what we configure later in OpenEMS Edge. The <code>Debug Mode 'DETAILED'</code> setting helps us to get some more details on the internal behaviour.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/config-backend-edge.websocket.png" alt="Configuration of Backend Edge.Websocket">
</div>
<div class="title">Figure 19. Configuration of Backend Edge.Websocket</div>
</div>
</li>
<li>
<p>Configure Ui.Websocket</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <em><strong>Ui.Websocket</strong></em> service is responsible for the communication between OpenEMS Backend and OpenEMS UI.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the example we are configuring the <code>Port '8082'</code>. This port needs to match with what we configure later in the OpenEMS UI environment file. We are again setting <code>Debug Mode 'DETAILED'</code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/config-backend-ui.websocket.png" alt="Configuration of Backend Ui.Websocket">
</div>
<div class="title">Figure 20. Configuration of Backend Ui.Websocket</div>
</div>
</li>
<li>
<p>Configure Timedata</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Timedata</strong> service provider is responsible for holding the current and historic data of each connected Edge device.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the example we are configuring the <em><strong>Timedata.Dummy</strong></em> service. The default value for _Component-ID` can be accepted without changes, so just press <b class="button">Save</b>. In a production system you would want to use a real implementation like <strong>Timedata.InfluxDB</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/config-backend-timedata.dummy.png" alt="Configuration of Backend Timedata.Dummy">
</div>
<div class="title">Figure 21. Configuration of Backend Timedata.Dummy</div>
</div>
</li>
<li>
<p>Configure Metadata</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Metadata</strong> service provider is responsible for authentication of Edge devices and Users connecting via UI.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/config-backend-metadata.dummy.png" alt="Configuration of Backend Metadata.Dummy">
</div>
<div class="title">Figure 22. Configuration of Backend Metadata.Dummy</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the example we are configuring the <em><strong>Metadata.Dummy</strong></em> service. It takes no configuration parameters, so just press <b class="button">Save</b>. In a production system you would want to use a real implementation like <em><strong>Metadata.File</strong></em>, which uses a static JSON file as input, or <em><strong>Metadata.Odoo</strong></em>, which uses the <strong>Odoo</strong> business software for authentication and IoT device management. This will require the <a href="https://github.com/OpenEMS/odoo-openems">Odoo-OpenEMS-Addon</a> to be installed on your Odoo instance. See the <a href="https://gitpod.io/#https://github.com/OpenEMS/openems/tree/main">OpenEMS Live-Demo Gitpod workspace</a> for a full, production ready example configuration. For more information see → <a href="simulation/gitpod.html" class="xref page">Gitpod Workspace</a>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Backend is ready</p>
<div class="paragraph">
<p>You should have seen some important log messages by now, that indicate that the OpenEMS Backend is ready to accept connections:</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">INFO  [d.timedata.dummy.TimedataDummy] [Timedata.Dummy] Activate
INFO  [d.metadata.dummy.MetadataDummy] [Metadata.Dummy] Activate
INFO  [socket.AbstractWebsocketServer] [Ui.Websocket] Starting websocket server [port=8082]
INFO  [socket.AbstractWebsocketServer] [Edge.Websocket] Starting websocket server [port=8081]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configure_openems_edge"><a class="anchor" href="#_configure_openems_edge"></a>5.2. Configure OpenEMS Edge</h3>
<div class="paragraph">
<p>Next we will configure OpenEMS Edge to connect to the OpenEMS Backend <em><strong>Edge.Websocket</strong></em> service.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Switch back to the <a href="http://localhost:8080/system/console/configMgr">Apache Felix Web Console Configuration for OpenEMS Edge <span class="icon"><i class="fa fa-external-link"></i></span></a>.</p>
</li>
<li>
<p>Configure the <em><strong>Controller Api Backend</strong></em> Component. The default values can be accepted without changes right now.</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-controller-api-backend.png" alt="Configuration of Controller Api Backend">
</div>
<div class="title">Figure 23. Configuration of Controller Api Backend</div>
</div>
<div class="paragraph">
<p>Some configuration parameters are still noteworthy here:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><em>Apikey</em> is used to authenticate this Edge at the Backend Metadata service. It has to be unique for each Edge.</p>
</li>
<li>
<p><em>Uri</em> is set to <code>ws://localhost:8081</code>. This defines an unencrypted websocket (<code>ws://</code>) connection to the local computer on port <code>8081</code> like we configured before for the <em><strong>Edge.Websocket</strong></em>. For a production setup you would want to use a TLS encrypted websocket with a <code>wss://</code> uri.</p>
<div class="paragraph">
<p>Once you press <b class="button">save</b> you should see logs in OpenEMS Edge</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">INFO  [onent.AbstractOpenemsComponent] [ctrlBackend0] Activate Controller.Api.Backend
INFO  [socket.AbstractWebsocketClient] [ctrlBackend0] Opening connection to websocket server [ws://localhost:8081]
INFO  [socket.ClientReconnectorWorker] [ctrlBackend0] Connecting WebSocket... [NOT_YET_CONNECTED]
INFO  [socket.ClientReconnectorWorker] [ctrlBackend0] Connected WebSocket successfully [0s]
INFO  [.controller.api.backend.OnOpen] [ctrlBackend0] Connected to OpenEMS Backend</code></pre>
</div>
</div>
<div class="paragraph">
<p>and OpenEMS Backend</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">INFO  [s.backend.common.metadata.Edge] Edge [edge0]: Update version from [0.0.0] to [...]
INFO  [mon.metadata.SimpleEdgeHandler] Edge [edge0]. Update config: ...
INFO  [dgewebsocket.EdgeWebsocketImpl] [monitor] Edge-Connections: 1</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_connect_openems_ui_with_backend"><a class="anchor" href="#_connect_openems_ui_with_backend"></a>5.3. Connect OpenEMS UI with Backend</h3>
<div class="paragraph">
<p><em>(You need to have completed the <a href="ui/setup-ide.html" class="xref page">OpenEMS UI guide</a> for the following steps)</em></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Visual Studio Code terminal stop the running <code>ng serve&#8230;&#8203;</code> by pressing <b class="button">ctrl</b> + <b class="button">c</b></p>
</li>
<li>
<p>Restart OpenEMS UI in 'local backend mode':</p>
<div class="paragraph">
<p><code>ng serve -c openems-backend-dev</code></p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
OpenEMS UI can work both for local connections to OpenEMS Edge as well as cloud connections to OpenEMS Backend. The switch requires some basic parameters that are defined in 'environment' files <code>ui/src/themes/openems/environments</code>. The possible parameters for <code>ng serve -c&#8230;&#8203;</code> are defined in the <code>ui/angular.json</code> file.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a browser at <a href="http://localhost:4200" class="bare">http://localhost:4200</a></p>
</li>
<li>
<p>You should see OpenEMS UI Login. Log in with any email / username and password.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<em><strong>Metadata.Dummy</strong></em> accepts any user/password combination. For production use, switch to a different <strong>Metadata</strong> implementation as described above.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/openems-ui-backend-login.png" alt="OpenEMS UI Login screen">
</div>
<div class="title">Figure 24. OpenEMS UI Login screen</div>
</div>
</li>
<li>
<p>You will be presented an overview list of all connected OpenEMS Edge devices you have permissions for:</p>
<div class="imageblock">
<div class="content">
<img src="_images/openems-ui-backend-overview.png" alt="OpenEMS UI Overview screen">
</div>
<div class="title">Figure 25. OpenEMS UI Overview screen</div>
</div>
</li>
<li>
<p>Click on <strong>OpenEMS Edge #0</strong> to see the same live-view as before on the local connection.</p>
<div class="imageblock">
<div class="content">
<img src="_images/openems-ui-backend-live.png" alt="OpenEMS UI Live screen">
</div>
<div class="title">Figure 26. OpenEMS UI Live screen</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps"><a class="anchor" href="#_next_steps"></a>6. Next steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you setup a complete development environment and have a working instance of OpenEMS Edge, OpenEMS Backend an OpenEMS UI, you can continue implementing your first device driver in OpenEMS. We provide a tutorial that explains the steps to implement an electric meter in OpenEMS Edge that is connected via Modbus/TCP.</p>
</div>
<div class="paragraph">
<p>The meter itself is simulated using a small Modbus slave application, so no external hardware is required for this guide. → <a href="edge/implement.html" class="xref page">Implementing a Device</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_help"><a class="anchor" href="#_help"></a>7. Help</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you experienced any problems or doubts, please get in touch with us on the <a href="https://community.openems.io/">OpenEMS Community</a> forum.</p>
</div>
</div>
</div>
</article>
  </main>
</div>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
